<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Exun Alumni Network - Companies</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/common.css" />
  <link rel="stylesheet" href="css/companies.css" />
  <script>
    let companies = [];

    function init() {
      loadCompanies();
    }

    async function loadCompanies() {
      try {
        const response = await fetch("/data/companies.json");
        companies = await response.json();
        companies.sort((a, b) => a.name.localeCompare(b.name));
        showCompanies(companies);
      } catch (error) {
        console.error("Error loading companies:", error);
      }
    }

    function showCompanies(list) {
      const mainContainer = document.getElementById("main-content");
      const container = document.getElementById("companies");
      container.innerHTML = "";

      const skeletonContainer = document.getElementById("skeleton-container");
      if (skeletonContainer) {
        mainContainer.removeChild(skeletonContainer);
      }

      list.forEach((item) => {
        const div = document.createElement("div");
        div.className = "company";
        const id = `${item.name.replace(/\s+/g, "-").toLowerCase()}`;
        div.id = id;

        const yearShort = item.year ? `'${String(item.year).slice(-2)}` : "";

        const founderMarkup = item.founder_intro_anchor
          ? `<a class="founder-link" href="/intro?year=${item.year}#${item.founder_intro_anchor}">${item.founder}</a>`
          : item.founder;

        div.innerHTML = `
          <a href="${item.url}" target="_blank" rel="noopener">
            <img src="${item.logo}" alt="${item.name} Logo" class="company-logo" />
            </a>
            <p class="name">
              <a href="${item.url}" target="_blank" rel="noopener">${item.name
          }</a>
              <a href="#${id}" class="anchor-link" title="Link to this company">                
              </a>
            </p>
            <span class="meta">
              ${founderMarkup}
              ${yearShort ? ` â€¢ ${yearShort}` : ""}
            </span>
          `;
        container.appendChild(div);
      });
    }

    window.addEventListener("DOMContentLoaded", init);
  </script>
  <script src="load-navbar.js"></script>
</head>

<body>
  <h1 id="sticky-header">
    EXUN ALUMNI <br />
    NETWORK
  </h1>

  <img id="logo" src="https://newsletter.bharatk.in/uploads/Vector.svg" alt="Exun Alumni Network Logo" />
  <div id="navbar-placeholder"></div>
  <div id="main-content">
    <h2>Companies</h2>
    <p>
      A list of companies started by Exun alumni. If you want yours added or
      updated, email us at
      <a href="mailto:hello@exunalumni.com">hello@exunalumni.com</a>.
    </p>

    <div id="skeleton-container">
      <div class="skeleton-name skeleton"></div>
      <div class="skeleton-text skeleton"></div>
      <div class="skeleton-text skeleton"></div>
      <div class="skeleton-text skeleton"></div>
    </div>

    <div id="companies"></div>
  </div>
</body>

</html>